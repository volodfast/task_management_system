require 'rails_helper'

feature 'login page' do
    scenario 'unsuccessfull login' do
        visit('/')
        click_link 'Log In'
        fill_in 'session_email', with: 'errorsample@example.com'
        fill_in 'session_password', with: 'randompass'
        click_button 'Log In'
        expect(page).to have_content('Invalid email/password combination')
    end

    scenario 'successfull login' do
        visit('/')
        click_link 'Sign Up'
        fill_in 'user_first_name', with: 'vova'
        fill_in 'user_last_name', with: 'test'
        fill_in 'user_email', with: 'vovatest@mail.com'
        fill_in 'user_password', with: 'password'
        fill_in 'user_password_confirmation', with: 'password'
        click_button 'Create account'
        click_link 'Log out'
        visit('/')
        click_link 'Log In'
        fill_in 'session_email', with: 'vovatest@mail.com'
        fill_in 'session_password', with: 'password'
        click_button 'Log In'
        expect(page).to_not have_link('Log In')
        expect(page).to have_link('Profile')
        expect(page).to have_link('Log out')
    end
    
end