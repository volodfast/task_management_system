<% provide(:title, @user.full_name) %>
<div class="row">
  <aside class="col-md-4">
    <section class="user_info">
      <h1>
        <%= @user.full_name %>
      </h1>
      <p>Today is: <span class="dateline"><%= DateTime.now.to_date %></span></p>
      <%= button_to "Create New Task", new_user_task_path(@user.id), class: "btn btn-primary", method: :get %>
    </section>
  </aside>
  <div class="col-md-8">
    <ul class="nav nav-tabs">
      <li class="active">
        <a data-toggle="tab" href="#active_tasks_container">Active tasks</a>
      </li>
      <li>
        <a data-toggle="tab" href="#finished_tasks_container">Finished tasks</a>
      </li>
    </ul>
    
    <div class="tab-content">
    
    <div class="tab-pane fade in active" id="active_tasks_container">
      <% if @active_tasks.any? %>
        <h3>Number of active tasks: <%= @active_tasks.count %></h3>
        <div class="select_buttons">
          <button class="btn btn-default" id="check_all_active">Check all</button>
          <button class="btn btn-default" id="uncheck_all_active">Uncheck all</button>        
        </div>
        <table class="table-striped table-hover table-active-tasks table-tasks">
          <tr class="table_head">
            <th class="col-md-1 text-center checkbox_column"></th>
            <th class="col-md-2 text-center title_column">Title</th>
            <th class="col-md-2 text-center due_date_column">Due Date</th>
            <th class="col-md-1 text-center priority_column">Priority</th>
            <th class="col-md-1 text-center edit_task_column"></th>
            <th class="col-md-1 text-center delete_task_column"></th>
          </tr>
          <%= render partial: 'tasks/task', collection: @active_tasks, as: :task %>
        </table>
      <% else %>
        <h3>You have no active task! Create a new one!</h3>
      <% end %>
    </div>

    <div class="tab-pane fade" id="finished_tasks_container">
    <% if @finished_tasks.any? %>
      <h3>Number of finsihed tasks: <%= @finished_tasks.count %></h3>
      <div class="select_buttons">
        <button class="btn btn-default" id="check_all_finished">Check all</button>
        <button class="btn btn-default" id="uncheck_all_finished">Uncheck all</button>      
      </div>
      <table class="table-striped table-hover table-finished-tasks table-tasks">
        <tr class="table_head">
          <th class="col-md-1 text-center checkbox_column"></th>
          <th class="col-md-3 text-center title_column">Title</th>
          <th class="col-md-2 text-center due_date_column">Due Date</th>
          <th class="col-md-1 text-center priority_column">Priority</th>
          <th class="col-md-1 text-center edit_task_column"></th>
          <th class="col-md-1 text-center delete_task_column"></th>
        </tr>
        <%= render partial: 'tasks/task', collection: @finished_tasks, as: :task %>
      </table>
    <% else %>
      <h3>You have no finished task!</h3>
    <% end %>
    </div>

    </div>

  </div>
</div>